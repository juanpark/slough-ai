{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "CloudWatchLogs",
			"Effect": "Allow",
			"Action": [
				"logs:CreateLogGroup",
				"logs:DeleteLogGroup",
				"logs:DescribeLogGroups",
				"logs:PutRetentionPolicy",
				"logs:DeleteRetentionPolicy",
				"logs:FilterLogEvents",
				"logs:GetLogEvents",
				"logs:DescribeLogStreams",
				"logs:TagLogGroup"
			],
			"Resource": "arn:aws:logs:ap-northeast-2:*:log-group:/ecs/slough-ai*"
		},
		{
			"Sid": "SecretsManagerRead",
			"Effect": "Allow",
			"Action": [
				"secretsmanager:CreateSecret",
				"secretsmanager:GetSecretValue",
				"secretsmanager:DescribeSecret",
				"secretsmanager:PutSecretValue",
				"secretsmanager:UpdateSecret",
				"secretsmanager:TagResource"
			],
			"Resource": "arn:aws:secretsmanager:ap-northeast-2:*:secret:slough-ai-*"
		},
		{
			"Sid": "IAMRoleForECS",
			"Effect": "Allow",
			"Action": [
				"iam:CreateRole",
				"iam:DeleteRole",
				"iam:GetRole",
				"iam:PutRolePolicy",
				"iam:DeleteRolePolicy",
				"iam:GetRolePolicy",
				"iam:AttachRolePolicy",
				"iam:DetachRolePolicy",
				"iam:ListAttachedRolePolicies",
				"iam:ListRolePolicies",
				"iam:TagRole",
				"iam:ListInstanceProfilesForRole"
			],
			"Resource": ["arn:aws:iam::*:role/slough-ai-*"]
		},
		{
			"Sid": "IAMPassRoleToECS",
			"Effect": "Allow",
			"Action": "iam:PassRole",
			"Resource": ["arn:aws:iam::*:role/slough-ai-*"],
			"Condition": {
				"StringEquals": {
					"iam:PassedToService": "ecs-tasks.amazonaws.com"
				}
			}
		},
		{
			"Sid": "IAMCreateServiceLinkedRoles",
			"Effect": "Allow",
			"Action": "iam:CreateServiceLinkedRole",
			"Resource": "*",
			"Condition": {
				"StringEquals": {
					"iam:AWSServiceName": [
						"ecs.amazonaws.com",
						"elasticloadbalancing.amazonaws.com",
						"elasticache.amazonaws.com",
						"rds.amazonaws.com"
					]
				}
			}
		},
		{
			"Sid": "STSGetCallerIdentity",
			"Effect": "Allow",
			"Action": "sts:GetCallerIdentity",
			"Resource": "*"
		},
		{
			"Sid": "SSMForECSExec",
			"Effect": "Allow",
			"Action": [
				"ssmmessages:CreateControlChannel",
				"ssmmessages:CreateDataChannel",
				"ssmmessages:OpenControlChannel",
				"ssmmessages:OpenDataChannel"
			],
			"Resource": "*"
		},
		{
			"Sid": "CloudFrontManagement",
			"Effect": "Allow",
			"Action": [
				"cloudfront:CreateDistribution",
				"cloudfront:UpdateDistribution",
				"cloudfront:DeleteDistribution",
				"cloudfront:GetDistribution",
				"cloudfront:GetDistributionConfig",
				"cloudfront:ListDistributions",
				"cloudfront:TagResource",
				"cloudfront:ListTagsForResource"
			],
			"Resource": "*"
		}
	]
}
